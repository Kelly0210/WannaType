{"ast":null,"code":"import _slicedToArray from\"C:/projects/WannaType/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/* eslint-disable react-hooks/exhaustive-deps */import React from'react';import FinishBoard from'../Board/FinishBoard';import DisplayText from'../Display/DisplayText';import style from'./CustomInput.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CustomInput=function CustomInput(props){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),isDisabled=_React$useState2[0],disableInput=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isPassed=_React$useState4[0],passedResult=_React$useState4[1];var _React$useState5=React.useState(0),_React$useState6=_slicedToArray(_React$useState5,2),startTimeMs=_React$useState6[0],setStopwatch=_React$useState6[1];var _React$useState7=React.useState(''),_React$useState8=_slicedToArray(_React$useState7,2),value=_React$useState8[0],changeValue=_React$useState8[1];React.useEffect(function(){if(value.length!==0){props.passLastLetter(value.slice(-1));}},[value]);React.useEffect(function(){if(value.slice(-1)!==props.generatedLesson.generatedText[value.length-1]){props.mistakeCounter();props.mistakeHappenedToggle(true);}else{props.mistakeHappenedToggle(false);}if(props.numberOfMistakes===3){disableInput(true);passedResult(false);}},[value]);React.useEffect(function(){if(value.length===1){setStopwatch(new Date().getTime());}if(value.length!==0){var timePassedMs=new Date().getTime();var timePassedMin=(timePassedMs-startTimeMs)/1000/60;var CPM=Math.ceil(value.length/timePassedMin);props.charactersPerMinute(CPM);}},[value.length]);React.useEffect(function(){if(value.length===props.generatedLesson.generatedText.length&&value.length>0){passedResult(true);disableInput(true);}},[value.length,props.generatedLesson.generatedText.length]);React.useEffect(function(){var percentage=Math.ceil(value.length/props.generatedLesson.generatedText.length*100);props.completionPercentage(percentage);});var reloadLesson=function reloadLesson(lessonString,chapterString){setStopwatch(0);disableInput(false);passedResult(false);changeValue('');props.reloadLesson(lessonString,chapterString);};return/*#__PURE__*/_jsxs(\"div\",{className:style.InputBox,children:[/*#__PURE__*/_jsx(DisplayText,{value:value,generatedText:props.generatedLesson.generatedText}),/*#__PURE__*/_jsx(\"input\",{autoFocus:true,type:\"text\",value:value,disabled:isDisabled,onChange:function onChange(event){return changeValue(event.target.value);}}),isDisabled&&/*#__PURE__*/_jsx(FinishBoard,{isPassed:isPassed,lessonInfo:props.generatedLesson.lessonInfo,reloadLesson:reloadLesson})]});};export default CustomInput;","map":{"version":3,"sources":["C:/projects/WannaType/src/Components/CustomInput/CustomInput.jsx"],"names":["React","FinishBoard","DisplayText","style","CustomInput","props","useState","isDisabled","disableInput","isPassed","passedResult","startTimeMs","setStopwatch","value","changeValue","useEffect","length","passLastLetter","slice","generatedLesson","generatedText","mistakeCounter","mistakeHappenedToggle","numberOfMistakes","Date","getTime","timePassedMs","timePassedMin","CPM","Math","ceil","charactersPerMinute","percentage","completionPercentage","reloadLesson","lessonString","chapterString","InputBox","event","target","lessonInfo"],"mappings":"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","sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React from 'react';\r\nimport * as PropTypes from 'prop-types';\r\nimport FinishBoard from '../Board/FinishBoard';\r\nimport DisplayText from '../Display/DisplayText';\r\nimport style from './CustomInput.module.css';\r\n\r\nconst CustomInput = (props) => {\r\n    const [isDisabled, disableInput] = React.useState(false);\r\n    const [isPassed, passedResult] = React.useState(false);\r\n    const [startTimeMs, setStopwatch] = React.useState(0);\r\n    const [value, changeValue] = React.useState('');\r\n\r\n    React.useEffect(() => {\r\n        if (value.length !== 0) {\r\n            props.passLastLetter(value.slice(-1));\r\n        }\r\n    }, [value]);\r\n\r\n    React.useEffect(() => {\r\n        if (value.slice(-1) !== props.generatedLesson.generatedText[value.length - 1]) {\r\n            props.mistakeCounter();\r\n            props.mistakeHappenedToggle(true);\r\n        } else {\r\n            props.mistakeHappenedToggle(false);\r\n        }\r\n\r\n        if (props.numberOfMistakes === 3) {\r\n            disableInput(true);\r\n            passedResult(false);\r\n        }\r\n    }, [value]);\r\n\r\n    React.useEffect(() => {\r\n        if (value.length === 1) {\r\n            setStopwatch(new Date().getTime());\r\n        }\r\n        if (value.length !== 0) {\r\n            let timePassedMs = new Date().getTime();\r\n            let timePassedMin = (timePassedMs - startTimeMs) / 1000 / 60;\r\n            let CPM = Math.ceil(value.length / timePassedMin);\r\n\r\n            props.charactersPerMinute(CPM);\r\n        }\r\n    }, [value.length]);\r\n\r\n    React.useEffect(() => {\r\n        if (value.length === props.generatedLesson.generatedText.length && value.length > 0) {\r\n            passedResult(true);\r\n            disableInput(true);\r\n        }\r\n    }, [value.length, props.generatedLesson.generatedText.length]);\r\n\r\n    React.useEffect(() => {\r\n        let percentage = Math.ceil(value.length / props.generatedLesson.generatedText.length * 100);\r\n        props.completionPercentage(percentage);\r\n    });\r\n\r\n    const reloadLesson = (lessonString, chapterString) => {\r\n        setStopwatch(0);\r\n        disableInput(false);\r\n        passedResult(false);\r\n        changeValue('');\r\n\r\n        props.reloadLesson(lessonString, chapterString);\r\n    };\r\n\r\n    return (\r\n        <div className={style.InputBox}>\r\n            <DisplayText value={value}\r\n                generatedText={props.generatedLesson.generatedText} />\r\n\r\n            <input autoFocus\r\n                type=\"text\"\r\n                value={value}\r\n                disabled={isDisabled}\r\n                onChange={event => changeValue(event.target.value)} />\r\n\r\n            {isDisabled && <FinishBoard isPassed={isPassed}\r\n                lessonInfo={props.generatedLesson.lessonInfo}\r\n                reloadLesson={reloadLesson}\r\n            />}\r\n        </div>\r\n    )\r\n};\r\n\r\nCustomInput.propTypes = {\r\n    generatedText: PropTypes.string,\r\n    reloadLesson: PropTypes.func,\r\n\r\n    numberOfMistake: PropTypes.number,\r\n    handleMistake: PropTypes.func,\r\n    mistakeCounter: PropTypes.func,\r\n\r\n    completionPercentage: PropTypes.func,\r\n    charactersPerMinute: PropTypes.func,\r\n    passLastLetter: PropTypes.func\r\n};\r\n\r\nexport default CustomInput;"]},"metadata":{},"sourceType":"module"}